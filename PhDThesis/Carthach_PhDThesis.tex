% This template is mainly taken from Fredrick Font, which I guess to a large extent comes from Joan SerrÃ . There are some changes to it, mainly taken from Ajay Srinivasamurthy

% What version of the document are you compiling
%\def\DRAFTMODE{}   % Uncomment if generating the draft version
%\def\PRINTVER{}    % Uncomment if generating the final BOOK (print) version (The differences are in 1) Colors of hyperlinks, 2) Bleeds, 3) Trim marks + Size) 4) BnW figures
%\def\PRINTVERLINK{}    % Uncomment if generating the final BOOK (print) version (The differences are in 1) Colors of hyperlinks, 2) Bleeds, 3) Trim marks + Size)\textbf{}
\def\WithoutTrimOnline{}
% If both the commands are comments it generates a final PDF version to be distributted electronically.

%% Useful packages
\RequirePackage{fix-cm} % Technicalities
% -------------------------------------------------------------------------------------------------------------------------
%\documentclass[11pt,a4paper,twoside,openright]{memoir}	% Some extra options if needed in the future\textsl{}
%\documentclass[10pt,b5paper,twoside,showtrims,openright]{memoir} % Some extra options if needed in the future
%\documentclass[10pt,a4paper,twoside,showtrims,openright]{memoir} % Some extra options if needed in the future
\documentclass[11pt,a4paper,twoside,openright, showtrims, oldfontcommands]{memoir} 

%Fixing imp useful info
\renewcommand{\title}{Connecting Time and Timbre: Computational Methods for Generative Rhythmic Loops in Symbolic and Signal Domains}
\renewcommand{\author}{Cárthach Ó Nuanáin}
\newcommand{\thyear}{2016}
\newcommand{\departmenta}{Music Technology Group}
\newcommand{\departmentb}{Dept. of Information and Communication Technologies}
\newcommand{\supervisor}{Dr. Sergi Jordà}
% -------------------------------------------------------------------------------------------------------------------------
\usepackage[bottom]{footmisc}
\usepackage{times}
\usepackage[scaled]{beramono}
\usepackage[T1]{fontenc} 
\usepackage[utf8x]{inputenc}
\usepackage{mathptmx}
\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}
\DeclareMathAlphabet\mathbfcal{OMS}{cmsy}{b}{n}
%\usepackage{ae,aecompl}
\usepackage[UKenglish]{isodate}
\usepackage{cleveref}
\usepackage[british,catalan,spanish,es-nosectiondot]{babel}
\usepackage{url}
\urlstyle{rm}
\usepackage{enumitem}
\usepackage{amssymb,amsmath}
\usepackage[pdftex]{graphicx}
\usepackage{epsfig}
\usepackage{lscape} 
\usepackage{color}
\usepackage[table]{xcolor}% for alternating colors in tabels to improve readability
\usepackage{nicefrac}
\usepackage{titlecaps}
\Addlcwords{for, is, on}
%\usepackage{titlesec}
\usepackage[round,authoryear]{natbib}
\usepackage{acronym}
\usepackage[pdftex,backref=page,hyperfigures,breaklinks,colorlinks,bookmarksopenlevel=0,bookmarksdepth=2
pdfpagemode=UseOutlines,
pdftitle=Connecting~Time~and~Timbre~Computational~Methods~for~Generative~Rhythmic~Loops~in Symbolic~and~Signal~Domains
pdfauthor=Carthach~O~Nuanain,
pdfsubject=PhD~Thesis,
pdfkeywords=Melody~Motifs~Patterns~Raga~Phrases~Indian~art~music~Hindustani~Carnatic~MIR~Information~Retrieval~Analysis~Computation~AI~Signal~Processing
]{hyperref}
%\usepackage[style=long,nonumberlist,toc,acronym,nomain]{glossaries}
\usepackage[section,nopostdot,numberedsection=autolabel,acronym,nonumberlist,nomain,nogroupskip=true]{glossaries}
\usepackage{glossary-superragged}
\usepackage{mathtools}
%\usepackage{longtable}
\usepackage{rotating}
\usepackage{arydshln}
\usepackage{algorithm,algorithmicx}
\usepackage[noend]{algpseudocode}
\usepackage[threshold=0]{csquotes}
\usepackage{listings}
\usepackage[font=small,labelfont=bf]{caption}
\usepackage{subcaption}
%
%\let\footruleskip\undefined
%\usepackage{fancyhdr}
%\pagestyle{fancy}
\renewcommand*{\backrefalt}[4]{[{\footnotesize%
		\ifcase #1 Not cited.%
		\or Cited on page~#2.%
		\else Cited on pages #2.%
		\fi%
	}]}

\setlength{\epigraphwidth}{0.586\textwidth}
\renewcommand{\textflush}{flushleftright}

%\usepackage{natbibspacing}
%\setlength{\bibspacing}{0.3\baselineskip}
% per les pagines a la bibliografia
% -> UN COMMENT A PARTIR D?AQUI
%\renewcommand*{\backref}[1]{}
%\renewcommand*{\backrefalt}[4]{%
%    \ifcase #1 (Not cited.)%
%    \or        (Cited on page~#2.)%
%    \else      (Cited on pages~#2.)%
%    \fi}

\usepackage{fixltx2e} % Technicalities
\usepackage{latexsym}
\usepackage{rotating}
\usepackage{bm}
%\usepackage{bibentry}\nobibliography*
\usepackage{longtable}
%\usepackage{verbatim}
%\newsubfloat{figure}
\usepackage{wrapfig}
% better tables
\usepackage[para]{threeparttable}
\usepackage{booktabs}
\usepackage{arydshln}

\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}
\usepackage{array}
\newcolumntype{P}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{L}[1]{>{\centering\arraybackslash}m{#1}}
\newcolumntype{T}[1]{>{\raggedleft\arraybackslash}p{#1}}

% for footnotes in tables
\usepackage{footnote}
\usepackage{multirow}
\makesavenoteenv{tabular}
\makesavenoteenv{table}
\usepackage{courier}

\usepackage{ifthen}
\usepackage{chngcntr}
\counterwithout{footnote}{chapter}

\usepackage{lipsum}
\newcommand{\signat}[1]{%
	{%
		\unskip
		\nobreak
		\hfil
		\penalty50%
		\hskip2em%
		\hbox{}%
		\nobreak
		\hfil
		#1%
		\parfillskip=0pt%
		\finalhyphendemerits=0% 
		\endgraf
	}%
}


\maxsecnumdepth{subsubsection}
\setsecnumdepth{subsubsection}
%\maxtocdepth{subsubsection}
%\settocdepth{subsubsection}
\maxtocdepth{subsection}
\settocdepth{subsection}

\definecolor{NoColor}{rgb}{0,0,0}
%%%%%%%%\definecolor{LinkColor}{rgb}{0,0,0.25}
%%%%%%%%\definecolor{ExtLinkColor}{rgb}{0,0.3,0}
\definecolor{tabgray}{gray}{0.8}
\definecolor{CiteColor}{rgb}{0, 0, 0.3} 
\definecolor{LinkColor}{rgb}{0, 0, 0.3} 
% \definecolor{LinkColor}{rgb}{0, 1, 0} 
% \definecolor{ExtLinkColor}{rgb}{0, 0.4, 0}
\definecolor{ExtLinkColor}{rgb}{0, 0, 0.6}

\ifdefined\PRINTVERLINK
\hypersetup{citecolor=black,linkcolor=black,urlcolor=black}
\else
\hypersetup{citecolor=CiteColor,linkcolor=LinkColor,urlcolor=ExtLinkColor}
\fi

%% Format UPF, dues cares. Recordeu que les dimensions d'A4 i B5 son (210mm,297mm) i (176mm,250mm), respectivament.
\setstocksize{297mm}{210mm} % El suport original es A4
\settrimmedsize{250mm}{176mm}{*} % El suport final, despres de tallar, B5.
\setlength{\trimtop}{23mm} % Alcada de la franja superior a tallar.
\setlength{\trimtop}{24mm} % Alcada de la franja inferior a tallar.
\setlength{\trimedge}{17mm} % Amplada de la franja interior a tallar per cada costat.
%\setulmarginsandblock{*}{29mm}{1.1} % Marges verticals (3cm a dalt, 0.9*3cm a baix)
%\setlrmarginsandblock{30mm}{*}{0.75} % Marges laterals (3cm a la dreta, 0.75*3cm l'esquerra)
\setulmarginsandblock{23mm}{23mm}{*} % used to be {25mm}{16mm}
\setlrmarginsandblock{25mm}{*}{0.8}
\checkandfixthelayout
\trimLmarks % Marques de tall en forma de 'L'




\ifdefined\WithoutTrimOnline
\setstocksize{250mm}{176mm}  % The size of the stock paper (support), A4
\settrimmedsize{\stockheight}{\stockwidth}{*} % B5, the size of the final copy, cut from the stock paper.
\setlength{\trimtop}{0mm} % Alcada de la franja inferior a tallar.
\setlength{\trimedge}{0mm} % Amplada de la franja interior a tallar per cada costat.
\setulmarginsandblock{23mm}{23mm}{*} % used to be {25mm}{16mm}
\setlrmarginsandblock{25mm}{*}{0.8}
\showtrimsoff
\checkandfixthelayout
\fi

%%%%%%%%% TAKEN FROM AJAY SEE IF THIS SIZE LOOKS BETTER OTHERWISE STICK TO WHAT IT IS 
%\ifdefined\PRINTVER
%\setstocksize{297mm}{210mm}  % The size of the stock paper (support), A4
%\settrimmedsize{250mm}{176mm}{*} % B5, the size of the final copy, cut from the stock paper.
%\setlength{\trimtop}{23mm}   % Top margin: top_stock - top_page
%\setlength{\trimedge}{17mm}  % Outer later margin: lat_stock - lat_page
%\setlrmarginsandblock{34mm}{30mm}{*} % 
%\setulmarginsandblock{27mm}{25mm}{*} % 
%\trimLmarks % Ls, not crosses (which may leave traces on the final copy) as trimmarks.
%\checkandfixthelayout
%\else
%\setstocksize{250mm}{176mm}  % The size of the stock paper (support), A4
%\settrimmedsize{\stockheight}{\stockwidth}{*} % B5, the size of the final copy, cut from the stock paper.
%\setlength{\trimtop}{0mm}   % Top margin: top_stock - top_page
%\setlength{\trimedge}{0mm}  % Outer later margin: lat_stock - lat_page
%\setlrmarginsandblock{32mm}{32mm}{*} % 
%\setulmarginsandblock{27mm}{25mm}{1.0} % 
%\showtrimsoff
%\checkandfixthelayout
%\fi



%% UNCOMMENT THIS FOR ONLINE VERSION %%%%
%\setstocksize{250mm}{176mm}  % The size of the stock paper (support), A4
%\settrimmedsize{\stockheight}{\stockwidth}{*} % B5, the size of the final copy, cut from the stock paper.
%\setlength{\trimtop}{0mm}   % Top margin: top_stock - top_page
%\setlength{\trimedge}{0mm}  % Outer later margin: lat_stock - lat_page
%\showtrimsoff
%\checkandfixthelayout



% arreglar que floats al final de capitol no es centrin verticalment
%\makeatletter% Set distance from top of page to first float
%\setlength{\@fptop}{5pt}
%\makeatother

% perque no es posi espai blanc raro entre coses
%\raggedbottom
\flushbottom

% espai despres de floats
\setlength{\textfloatsep}{0.5cm}


% Estil de quan poso tags al text tags
\newcommand{\atag}[1]{\small{\texttt{#1}}\normalsize}

\input{ch00/mychapterstyles}
\chapterstyle{myveelo}
\pagestyle{mainmatter}

% ---- Some configs...



%\renewcommand{\rmdefault}{put}
%\renewcommand{\sfdefault}{phv}
\newcommand{\superscript}[1]{\ensuremath{^{\textrm{#1}}}}
\newcommand{\subscript}[1]{\ensuremath{_{\textrm{#1}}}}
\newcommand{\quotat}[2]{
  \begin{flushright}
    \textit{``#1'',\\
    \vspace*{0.3cm}
    #2.\\
    \vspace*{0.3cm}
    }
  \end{flushright}
}


\renewcommand{\mkcitation}[1]{ (#1)}
%\renewcommand{\mktextquote}[6]{#1#2#3#6#4#5}
%\renewcommand{\mktextquote}[6]{#1#2#4#3\hfill\hbox{#6}#5}
\renewcommand{\mktextquote}[6]{#1#2#4#3\signat{#6}#5}
\renewcommand{\mkblockquote}[5]{#1#2#3\signat{#4}#5}


% Space between paragraphs and lines
\setlength{\parskip}{1.4mm} % space between paragraphs
%\setlength{\parskip}{1mm plus1mm minus1mm}

%\linespread{1.35}
\linespread{1}

% Bullet points index esquema
%\newcommand{\point}{\vspace{0.25cm}$\bullet$\hspace{0.25cm}}
\newcounter{points}
\definecolor{orange}{rgb}{1,0.5,0}
\newcommand*\point{%
  \stepcounter{points}%
  \vspace{0.25cm}
  \textcolor{orange}{$\bullet^{\thepoints}$}
  }

% pel tema git

%\usepackage{totcount}
%\regtotcounter{points}
%\usepackage{eso-pic}% http://ctan.org/pkg/eso-pic
%\input{gitHeadInfo}
%\newcommand{\gitInfo}{Commit info: \gitShortHash\gitDirty, \gitDate}
%\AddToShipoutPictureBG{% Add picture to background of every page
%  \AtPageLowerLeft{%
%    \raisebox{1.2\baselineskip}{\makebox[\paperwidth]{\begin{minipage}{21cm}\centering
%      %\textcolor{orange}{\gitInfo \hspace{0.15cm}(\total{points} points)}
%      \textcolor{orange}{\gitInfo}
%    \end{minipage}}}%
%  }
%}

% per definir mides de figures
\newcommand{\figSizeHundred}{1.0\columnwidth}
\newcommand{\figSizeNinety}{0.9\columnwidth}
\newcommand{\figSizeNinetyFive}{0.95\columnwidth}
\newcommand{\figSizeEightyFive}{0.8\columnwidth}
\newcommand{\figSizeEighty}{0.8\columnwidth}
\newcommand{\figSizeSeventy}{0.7\columnwidth}
\newcommand{\figSizeSeventyFive}{0.75\columnwidth}
\newcommand{\figSizeSixtyFive}{0.65\columnwidth}
\newcommand{\figSizeSixty}{0.6\columnwidth}
\newcommand{\figSizeFifty}{0.5\columnwidth}

\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}

% Variables matematiques i altres
\usepackage{color}
\definecolor{darkgreen}{rgb}{0,0.8,.3}
\newcommand{\TODO}[1]{{\color{red}{[{TODO:} #1}]}}
\newcommand{\COMMENT}[1]{{\color{darkgreen}{[{COMMENT:}#1}]}}
\newcommand{\ADD}[1]{{\color{blue}#1}}
\newcommand{\REM}[1]{{\color{red}#1}}
\newcommand{\XXX}[3]{{\color{blue}{{[#1$\rightarrow$#2:} #3{]}}}}
% Uncomment next line to hide all comments
\renewcommand{\XXX}[3]{}
\renewcommand{\TODO}[1]{}
\renewcommand{\COMMENT}[1]{}
\renewcommand{\REM}[1]{}
\renewcommand{\ADD}[1]{#1}

\def\mathLarge#1{\mbox{\LARGE $#1$}}


%quote al final
\renewenvironment{quotation}
  {\begin{trivlist} \setlength\leftskip{2cm} \setlength\rightskip{0pt}
   \item\relax}
  {\end{trivlist}}


%% Custom commands
% Some formatting commands
\newcommand{\figref}[1]{Figure~\ref{#1}}
\newcommand{\tabref}[1]{Table~\ref{#1}}
\newcommand{\eqnref}[1]{Eq.~\ref{#1}}
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\chapref}[1]{Chapter~\ref{#1}}
\newcommand{\appref}[1]{Appendix~\ref{#1}}
\newcommand{\algoref}[1]{Algorithm~\ref{#1}}



%datasets
%%%%%%%%%%%%% TONIC %%%%%%%%%%%%%%%%
\newcommand{\tdscmclipsinst}{$\mathrm{TID}_\mathrm{CM1}$}
\newcommand{\tdscmclipsvocal}{$\mathrm{TID}_\mathrm{CM2}$}
\newcommand{\tdscmfullrecvocal}{$\mathrm{TID}_\mathrm{CM3}$}

\newcommand{\tdsiitmfullconcert}{$\mathrm{TID}_\mathrm{IITM1}$}
\newcommand{\tdsiitmfullrec}{$\mathrm{TID}_\mathrm{IITM2}$}

\newcommand{\tdsiisc}{$\mathrm{TID}_\mathrm{IISc}$}

%%%%%%%%%%%%% Nyas %%%%%%%%%%%%%%%%
\newcommand{\ndscm}{$\mathrm{NDD}_\mathrm{CM}$}

%%%%%%%%%%%%% Melodic similarity %%%%%%%%%%%%%%%%
\newcommand{\msds}{$\mathrm{MSD}$}
\newcommand{\msdsiitmcmd}{$\mathrm{MSD}_\mathrm{iitm}^\mathrm{cmd}$}
\newcommand{\msdsiitbhmd}{$\mathrm{MSD}_\mathrm{iitb}^\mathrm{hmd}$}

\newcommand{\msdscm}{$\mathrm{MSD}_\mathrm{CM}$}
\newcommand{\msdscmcmd}{$\mathrm{MSD}_\mathrm{CM}^\mathrm{cmd}$}
\newcommand{\msdscmhmd}{$\mathrm{MSD}_\mathrm{CM}^\mathrm{hmd}$}

%%%%%%%%%%%%% Raga recognition %%%%%%%%%%%%%%%%
\newcommand{\rrdscmdbig}{$\mathrm{RRD}_\mathrm{CMD}$}
%\newcommand{\rrdscmdsmall}{$\mathrm{RRDS}_\mathrm{CMD}^{10}$}
\newcommand{\rrdshmdbig}{$\mathrm{RRD}_\mathrm{HMD}$}


% Methods

\newcommand{\tonicRanjaniA}{$\mathrm{M}_\mathrm{RH1}$}
\newcommand{\tonicRanjaniB}{$\mathrm{M}_\mathrm{RH2}$}

\newcommand{\tonicJustin}{$\mathrm{M}_\mathrm{JS}$}
\newcommand{\tonicSankalp}{$\mathrm{M}_\mathrm{SG}$}

\newcommand{\tonicAshwinA}{$\mathrm{M}_\mathrm{AB1}$}
\newcommand{\tonicAshwinB}{$\mathrm{M}_\mathrm{AB2}$}
\newcommand{\tonicAshwinC}{$\mathrm{M}_\mathrm{AB3}$}

\newcommand{\tonicSengupta}{$\mathrm{M}_\mathrm{RS}$}
\newcommand{\tonicChordia}{$\mathrm{M}_\mathrm{CS}$}

\newcommand{\nyasBaselineOne}{$\mathfrak{B}_\mathrm{R1}$}
\newcommand{\nyasBaselineTwo}{$\mathfrak{B}_\mathrm{R2}$}
\newcommand{\nyasBaselineThree}{$\mathfrak{B}_\mathrm{R3}$}


\newcommand{\melSimDurTrunc}{$\mathrm{M}_\mathrm{DT}$}
\newcommand{\melSimComWghtOne}{$\mathrm{M}_\mathrm{CW1}$}
\newcommand{\melSimComWghtTwo}{$\mathrm{M}_\mathrm{CW2}$}
\newcommand{\melSimBaseline}{$\mathrm{M}_\mathrm{B}$}

\newcommand{\ragarecVSM}{$\mathrm{M}_\mathrm{VSM}$}

\newcommand{\ragarecTDMS}{$\mathrm{M}_\mathrm{TDMS}$}
\newcommand{\ragarecTDMSBhatt}{$\mathrm{M}_\mathrm{TDMS}^{\mathrm{B}}$}
\newcommand{\ragarecTDMSKLD}{$\mathrm{M}_\mathrm{TDMS}^{\mathrm{KL}}$}
\newcommand{\ragarecTDMSFrob}{$\mathrm{M}_\mathrm{TDMS}^{\mathrm{F}}$}


\newcommand{\sotaChordia}{$\mathrm{M}_\mathrm{PC}$}
\newcommand{\sotaKoduri}{$\mathrm{M}_\mathrm{GK}$}


% Features
\newcommand{\nyasLocal}{$\mathcal{F}_\mathrm{L}$}
\newcommand{\nyasContextual}{$\mathcal{F}_\mathrm{C}$}


%table formatting related stuff
\newcommand{\tabletop}{\hline\hline}
\newcommand{\tablemid}{\hline}
\newcommand{\tablebot}{\hline\hline}



% ************ Lines for draft mode ************
% \usepackage[top=3cm,bottom=3cm,left=3cm,right=3cm,bindingoffset=0.8cm,includeheadfoot,paper=a4paper]{geometry}
% \linespread{1.6}
% **********************************************


\hyphenation{Universitat Pompeu Fabra}


%------------------------------------------------------------------------------------------------
% -----------------------------------------------------------------------------------------------
%------------------------------------------------------------------------------------------------
%------------------------------------------------------------------------------------------------


\newglossarystyle{mylong}{%
	\setglossarystyle{long}%
	\renewenvironment{theglossary}%
	{\begin{longtable}[l]{@{}p{\dimexpr 2.5cm-\tabcolsep}p{0.8\hsize}}}% <-- change the value here
		{\end{longtable}}%
}
\input{glossary/glossary.tex}
\makeglossaries	

\begin{document}


% ----------------------------------------------
\parindent0ex
\selectlanguage{british}

% ----------------------------------------------

\frontmatter

%%%% TITLE %%%%%
\include{ch00/1_titlePage}


%%%% PRELIM %%%%%
\include{ch00/preliminarystuff}

%%%% TOC %%%%%
\cleartorecto\tableofcontents
\cleartorecto\include{ch00/mathSymbols}
\renewcommand*\listfigurename{List of Figures}
\cleartorecto\listoffigures
\renewcommand*\listtablename{List of Tables}
\cleartorecto\listoftables 

% ----------------------------------------------

\mainmatter

%%%
\cleartorecto\include{ch01_introduction/ch01_introduction}
\cleartorecto\include{ch02_dancemusic/ch02_dancemusic}
\cleartorecto\include{ch03_symbolic/ch03_symbolic}
\cleartorecto\include{ch04_sota/ch04_sota}
\cleartorecto\include{ch05_pyconcat/ch05_pyconcat}
\cleartorecto\include{ch06_rhythmcat/ch06_rhythmcat}
\cleartorecto\include{ch07_evaluation/ch07_evaluation}
\cleartorecto\include{ch08_conclusions/ch08_conclusions}

% ----------------------------------------------


\appendix
\renewcommand\chaptername{Appendix}
\cleartorecto\include{ch99/appendix}
\chapter{Glossary}
\label{app:glossary}
\renewcommand{\arraystretch}{1}	
%\renewcommand{\glsnamefont}[1]{\textbf{#1}}
\printglossary[type = \acronymtype, style = mylong]
\printglossary[type=MU, style = mylong]

%\cleartorecto\include{ch99/quotation}
%\cleartorecto\newpage\thispagestyle{empty}\mbox{}


\backmatter
%\cleartorecto\include{ch99/finalpage}nomain
\bibliographystyle{apa_jserra2}
%\cleartorecto\bibliography{sankalp.bib,sankalp_myPubs.bib}
\cleartorecto\bibliography{library.bib}
%\cleartorecto\small\bibliography{ch99/jserra}\normalsize
%\cleartorecto\footnotesize\bibliography{ch99/jserra}\normalsize

%
%\let\svaddcontentsline\addcontentsline
%\renewcommand\addcontentsline[3]{%
%  \ifthenelse{\equal{#1}{lof}}{}%
%  {\ifthenelse{\equal{#1}{lot}}{}{\svaddcontentsline{#1}{#2}{#3}}}}

\ifdefined\PRINTVERLINK 
\cleartorecto
\newpage\null\thispagestyle{empty}\newpage
\newpage\null\thispagestyle{empty}\newpage
\newpage\null\thispagestyle{empty}\newpage
\fi

\end{document}
